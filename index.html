<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2025台新信用卡｜9-12月刷卡回饋方案搜尋器</title>

<style>
  :root{ --bg:#0f1220; --card:#151a2e; --muted:#8fa0c2; --text:#e8eeff; --accent:#6aa6ff; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",PingFang TC,Roboto,"Noto Sans CJK TC","Microsoft JhengHei",sans-serif;background:var(--bg);color:var(--text)}
  header{padding:24px 16px 8px;max-width:980px;margin:0 auto}
  header h1{margin:0 0 6px;font-size:24px;letter-spacing:.5px}
  header p{margin:0;color:var(--muted);font-size:14px}
  .wrap{max-width:980px;margin:12px auto 40px;padding:0 16px}
  .card{background:var(--card);border-radius:14px;padding:16px;border:1px solid rgba(255,255,255,.06);box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  input[type="text"]{flex:1;min-width:260px;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#0c1022;color:var(--text);font-size:16px;outline:none}
  input[type="text"]::placeholder{color:#7281a8}
  .btn{padding:11px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#0c1022;color:#e8eeff;cursor:pointer}
  .btn:hover{border-color:var(--accent)}
  label.chk{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px;white-space:nowrap}
  .hint{color:var(--muted);font-size:13px;margin-top:8px}
  .results{margin-top:16px;display:grid;gap:10px}
  .result{padding:14px;border-radius:12px;background:#0f1530;border:1px solid rgba(255,255,255,.08)}
  .plan{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(106,166,255,.15);border:1px solid rgba(106,166,255,.35);color:#cfe0ff;font-size:12px;margin-right:8px}
  .plan.nobonus{background:rgba(180,190,210,.15);border-color:rgba(180,190,210,.35);color:#dfe6ff}
  .score{font-size:12px;color:#9fb5e6}
  .why{margin:8px 0 0;color:#cad6ff;font-size:14px;line-height:1.6}
  .badge{display:inline-block;border:1px solid rgba(255,255,255,.18);padding:2px 8px;border-radius:999px;font-size:12px;color:#cbd6ff;margin:2px 6px 0 0}
  .muted{color:var(--muted)}
  .src{margin-top:14px;font-size:12px;color:#aebde6}
  .src a{color:#cfe0ff}
</style>
</head>
<body>
<header>
  <h1>2025台新信用卡｜9-12月刷卡回饋方案搜尋器</h1>
  <p>輸入關鍵詞或店名（例：7-11、全家、IKEA、Uber、五十嵐、KKday…）→ 建議切換方案與依據。</p>
</header>

<div class="wrap">
  <div class="card">
    <div class="row">
      <input id="q" type="text" placeholder="輸入關鍵詞或店名…（支援常見同義寫法）" />
      <button class="btn" id="go">搜尋</button>
      <label class="chk"><input type="checkbox" id="holiday" /> 是假日/國定假日嗎？（同時提示「假日刷 2%」。）</label>
    </div>
    <div class="hint">資料依據：台新銀行官方「七大刷任你切最高3.8%回饋」。實際回饋請以官網公告與刷卡當下條件為準；MCC 認定以發卡機構/收單行為準。</div>

    <div id="results" class="results"></div>
    <div class="src">官方參考：<a href="https://www.taishinbank.com.tw/TSB/personal/credit/intro/overview/future/f7b68cfa-549d-11f0-b432-0050568c09e3" target="_blank" rel="noopener">台新銀行｜七大刷任你切回饋網頁</a></div>
  </div>
</div>

<script>
/** ========= 資料區 ========= */
const DATA = [
  // 1. Pay著刷 3.8%
  {name:'台新Pay場域', plan:'Pay著刷 3.8%', group:'台新Pay綁定支付'},
  {name:'新光三越', plan:'Pay著刷 3.8%', group:'台新Pay綁定支付'},
  {name:'IKEA', plan:'Pay著刷 3.8%', group:'台新Pay綁定支付'},
  {name:'路易莎咖啡', plan:'Pay著刷 3.8%', group:'台新Pay綁定支付'},
  {name:'台灣大車隊', plan:'Pay著刷 3.8%', group:'台新Pay綁定支付'},

  // 2. 天天刷 3.3%
  {name:'7-11', plan:'天天刷 3.3%', group:'超商量販'},
  {name:'全家便利商店', plan:'天天刷 3.3%', group:'超商量販'},
  {name:'家樂福', plan:'天天刷 3.3%', group:'超商量販'},
  {name:'大買家', plan:'天天刷 3.3%', group:'超商量販'},
  {name:'台鐵', plan:'天天刷 3.3%', group:'通勤交通'},
  {name:'高鐵', plan:'天天刷 3.3%', group:'通勤交通'},
  {name:'LINE GO', plan:'天天刷 3.3%', group:'通勤交通'},
  {name:'Yoxi', plan:'天天刷 3.3%', group:'通勤交通'},
  {name:'Uber', plan:'天天刷 3.3%', group:'通勤交通'},

  // 3. 大筆刷 3.3%
  {name:'遠東SOGO', plan:'大筆刷 3.3%', group:'指定百貨'},
  {name:'微風', plan:'大筆刷 3.3%', group:'指定百貨'},
  {name:'MITSUI OUTLET PARK', plan:'大筆刷 3.3%', group:'指定Outlet'},

  // 4. 好饗刷 3.3%
  {name:'全臺餐飲', plan:'好饗刷 3.3%', group:'全臺餐飲'},
  {name:'Uber Eats', plan:'好饗刷 3.3%', group:'外送平台'},
  {name:'Foodpanda', plan:'好饗刷 3.3%', group:'外送平台'},

  // 5. 數趣刷 3.3%
  {name:'蝦皮', plan:'數趣刷 3.3%', group:'網購平台'},
  {name:'momo', plan:'數趣刷 3.3%', group:'網購平台'},

  // 6. 玩旅刷 3.3%
  {name:'海外消費', plan:'玩旅刷 3.3%', group:'外幣/境外'},
  {name:'華航', plan:'玩旅刷 3.3%', group:'航空公司'},
  {name:'Agoda', plan:'玩旅刷 3.3%', group:'訂房旅行'},

  // 7. 假日刷 2%
  {name:'假日通用', plan:'假日刷 2%', group:'節假日不限通路'}
];

// 同義詞
const SYNONYMS = {
  '7-11':['7/11','7ELEVEN','7-ELEVEN','小七'],
  '全家便利商店':['全家','FamilyMart'],
  '麥當勞':['McDonald’s','McDonalds'],
  '肯德基':['KFC','kfc'],
  '五十嵐':['50嵐'],
  'CoCo':['COCO','CoCo都可']
};

// 官方排除清單（含速食+手搖飲）
const NO_BONUS = new Set([
  '麥當勞','肯德基',
  '水巷茶弄','五十嵐','50嵐','清心福全','COCO','CoCo都可','迷客夏','茶湯會',
  '大苑子','再睡5分鐘','茶の魔手','可不可','珍煮丹','麻古茶坊','COMEBUY','清原芋圓',
  '一芳水果茶','春陽茶事','TEA TOP'
]);
const NO_BONUS_NOTE = '官方排除：聯合信用卡中心小額支付收單，不加碼回饋';

// 索引建構
function normalize(str){ return (str||'').toLowerCase().replace(/\s+/g,'').trim(); }
const INDEX = [];
for(const item of DATA){
  const base = { ...item, key: normalize(item.name) };
  INDEX.push(base);
  const syns = SYNONYMS[item.name] || [];
  for(const s of syns){ INDEX.push({...item, name:item.name, alias:s, key:normalize(s)}); }
}

// 搜尋
function search(q, isHoliday){
  const n = normalize(q);
  const seen = new Set();
  const out = [];
  if(!n) return out;

  for(const it of INDEX){
    let score=0, why='';
    if(n===it.key){score=100;why=`精確命中「${it.alias?it.alias:it.name}」`;}
    else if(it.key.includes(n)||n.includes(it.key)){score=75;why=`部分相符：${it.name}`;}
    if(score>0){
      const sig = it.name+'|'+it.plan;
      if(!seen.has(sig)){
        seen.add(sig);
        if(NO_BONUS.has(it.name) && !isHoliday){
          out.push({name:it.name, plan:'不回饋', group:'官方排除', score:100, why:`查到 ${it.name} 屬官方排除`, note:NO_BONUS_NOTE});
        }else if(NO_BONUS.has(it.name) && isHoliday){
          out.push({name:it.name, plan:'不回饋', group:'官方排除', score:90, why:`平日屬官方排除`, note:NO_BONUS_NOTE});
          out.push({name:it.name, plan:'假日刷 2%', group:'節假日不限通路', score:85, why:`因是假日，任何通路皆可適用`, note:'含 LINE Pay/街口支付綁定'});
        }else{
          out.push({name:it.name, plan:it.plan, group:it.group, score, why, note:it.note||''});
        }
      }
    }
  }

  if(isHoliday && out.length===0){
    out.push({name:q, plan:'假日刷 2%', group:'節假日不限通路', score:60, why:'假日不限通路', note:'含 LINE Pay/街口支付綁定'});
  }

  return out;
}

// 渲染
function render(list){
  const box=document.getElementById('results');
  box.innerHTML='';
  if(list.length===0){box.innerHTML='<div class="result"><span class="muted">沒有找到對應</span></div>';return;}
  for(const r of list){
    const el=document.createElement('div');
    el.className='result';
    el.innerHTML=`<div><span class="plan ${/不回饋/.test(r.plan)?'nobonus':''}">${r.plan}</span>
    <span class="score">置信分數：${r.score}</span></div>
    <div class="why">理由：${r.why}；${r.group!=='官方排除'?`歸類為「${r.group}」。`:''}${r.note? '（'+r.note+'）':''}</div>
    <div class="badge">關鍵：${r.name}</div>`;
    box.appendChild(el);
  }
}

// 綁定
const $q=document.getElementById('q');
document.getElementById('go').addEventListener('click',()=>render(search($q.value,document.getElementById('holiday').checked)));
$q.addEventListener('keydown',e=>{if(e.key==='Enter'){render(search($q.value,document.getElementById('holiday').checked));}});
</script>
</body>
</html>
